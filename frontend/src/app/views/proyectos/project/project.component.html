<div class="breadcrumb">
	<h1>Proyecto </h1>
	<ul>
		<li>{{ proyecto?.name }}</li>
    </ul>
    <div style="margin-left: auto; margin-right: 5px;">
        <b>{{ (proyecto?.doctype==1)?'Simplificado':'Completo' }}</b>
    </div>
</div>
<div class="module-loader" *ngIf="loading">
    <div class="spinner spinner-bubble spinner-bubble-primary mr-3"></div>
</div>
<div class="separator-breadcrumb border-top"></div>

<div class="row">
	<div class="col-md-12">
		<ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
			<li [ngbNavItem]="1">
				<a ngbNavLink>Avances - Informaci√≥n </a>
				<ng-template ngbNavContent>
					<div class="row">
						<div class="col-lg-12 col-md-12">
							<div class="card o-hidden mb-4">
								<div class="row">
									<div class="col-md-6">
										<div class="card mb-4 mt-4 ml-4 ">
											<div class="card-body">
												<h6 class="mb-2 text-muted">Requerimientos de usuario</h6>
												<p class="mb-2 text-24 font-weight-light text-title">{{ (userreqs.length !=0) ? ((100*(infour.completos / userreqs.length)).toFixed(1)) : 0.0  }}%</p>
												<p class="mb-1">
													<ngb-progressbar type="success" [value]="(infour.completos/userreqs.length)*100" height="10px">
													</ngb-progressbar>
												</p>
											</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class="card mb-4 mt-4 mr-4">
											<div class="card-body">
												<h6 class="mb-2 text-muted">Requerimientos de sistema</h6>
												<p class="mb-2 text-24 font-weight-light text-title ">{{ (softreqs.length !=0) ? (100*(infosr.completos / softreqs.length)).toFixed(1) : 0.0  }}%</p>
												<p class="mb-1">
													<ngb-progressbar type="success" [value]="(infosr.completos/softreqs.length)*100" height="10px">
													</ngb-progressbar>
												</p>
											</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-6 col-md-12">
										<div class="card mb-4 ml-4 ">
											<div class="card-body">
												<div class="card-title">Equipo de trabajo </div>
												<div *ngFor="let miembro of equipo"
													class="d-flex align-items-center border-bottom-dotted-dim pb-3 mb-3">
													<img class="avatar-md rounded mr-3"
														src="./assets/images/faces/2.jpg" alt="">
													<div class="flex-grow-1">
														<h6 class="m-0">{{miembro.project_role}}</h6>
														<p class="m-0 text-small text-muted">{{miembro.name + " " + miembro.surname}}</p>
													</div>
													<div>
														<button class="btn btn-outline-primary btn-rounded btn-sm"> +
															Info </button>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-6 col-sm-12">
										<div class="card mb-4 mr-4">
											<div class="card-body">
												<div class="card-title">Casos de prueba</div>
												<div class="col-md-12">
													<div echarts [options]="salesChartPie" [autoResize]="true" [merge]="dataTestCases"
														style="height: 200px;"></div>
												</div>
											</div>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
				</ng-template>
			</li>
			<li [ngbNavItem]="2">
				<a ngbNavLink>Incrementos</a>
				<ng-template ngbNavContent>
					<div class="row">
						<div class="col-md-12">
							<div class="card o-hidden mb-4">
								<div class="row">
									<div class="col-md-2">
										<div class="card o-hidden mb-4 ml-4 mt-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="text-muted mt-0 mb-0">Nuevo Incremento</p>
													<button _ngcontent-tkm-c169=""
														class="btn btn-primary btn-rounded" (click)="addIncrement(addIncrementConfirmModal, $event)">Agregar <i class="i-Add ml-1"></i> </button>
												</div>
											</div>
										</div>
										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Total de incrementos</p>
													<p class="text-primary text-40 line-height-1 m-0">{{ increments.length }}</p>
												</div>
											</div>
                                        </div>
									</div>
									<div class="col-md-10">
										<div class="card o-hidden mb-4 mt-4 mr-4">
											<ngx-datatable style="height: calc(100vh - 270px); box-shadow: none"
												class="material fullscreen" [columnMode]="'flex'" [headerHeight]="50"
												[footerHeight]="50" [rowHeight]="60" [scrollbarV]="true" [limit]="10"
												[rows]="increments">
												<ngx-datatable-column name="id" [flexGrow]="1">
													<ng-template ngx-datatable-header-template>
														Numero incremento
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ increments.indexOf(row)+1 }}
                                                    </ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="description" [flexGrow]="3">
													<ng-template ngx-datatable-header-template>
														Descripcion
													</ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="initDate" [flexGrow]="1">
													<ng-template ngx-datatable-header-template>
														Fecha inicio
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatDate(value) }}
                                                    </ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="endDate" [flexGrow]="1">
													<ng-template ngx-datatable-header-template>
														Fecha termino
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatDate(value) }}
                                                    </ng-template>
												</ngx-datatable-column>
											</ngx-datatable>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</ng-template>
			</li>
			<li [ngbNavItem]="3">
				<a ngbNavLink>Requerimientos de Usuario</a>
				<ng-template ngbNavContent>
					<div class="row">
						<div class="col-md-12">
							<div class="card o-hidden mb-4">
								<div class="row">
									<div class="col-md-2">

                                        <div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<div class="col-md-12 form-group mb-0">
														<select class="form-control">
															<option>Todos los incrementos</option>
															<option *ngFor="let item of increments" [value]="item.id">{{ item.name }}</option>
														</select>
													</div>
												</div>
											</div>
                                        </div>

                                        <div class="card o-hidden mb-4 ml-4 ">
											<div class="card-body text-center">
												<i class="i-Add-User"></i>
												<div class="content">
													<p class="text-muted mt-2 mb-0">Requerimiento de Usuario
													</p>
													<button _ngcontent-tkm-c169=""
														class="btn btn-primary btn-rounded" (click)="addUserRequeriment(userRequerimentConfirmModal, $event)" >Nuevo</button>
												</div>
											</div>
                                        </div>


										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Total</p>
													<p class="text-primary text-40 line-height-1 m-0">{{ userreqs.length }}</p>
												</div>
											</div>
                                        </div>

										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Finalizados </p>
													<p class="text-success text-40 line-height-1 m-0">{{ infour.completos }}</p>
												</div>
											</div>
										</div>

										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Pendientes</p>
													<p class="text-danger text-40 line-height-1 m-0">{{ infour.incompletos }}</p>
												</div>
											</div>
										</div>



									</div>
									<div class="col-md-10">
										<div class="card o-hidden mb-4 mt-4 mr-4">
											<ngx-datatable style="height: calc(85vh - 270px); box-shadow: none"
												class="material fullscreen" [columnMode]="'flex'" [headerHeight]="50"
												[footerHeight]="50" [rowHeight]="60" [scrollbarV]="true" [limit]="10"
												[rows]="userreqs">
												<ngx-datatable-column name="internalId" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Codigo
                                                    </ng-template>
                                                    <ng-template let-value="value" ngx-datatable-cell-template>
                                                        RU{{value | number: '2.0'}}
                                                      </ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="description" [flexGrow]="50">
													<ng-template ngx-datatable-header-template>
														Descripci√≥n
													</ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="priority" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Prioridad
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatUserReqColumns(value, 'priority') }}
                                                    </ng-template>
                                                </ngx-datatable-column>
                                                <ngx-datatable-column name="stability" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Estabilidad
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatUserReqColumns(value, 'stability') }}
                                                    </ng-template>
                                                </ngx-datatable-column>
                                                <ngx-datatable-column name="cost" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Costo
                                                    </ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="status" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Estado
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatUserReqColumns(value, 'status') }}
                                                    </ng-template>
                                                </ngx-datatable-column>
                                                <ngx-datatable-column [cellClass]="'va-middle'" name="Accion" [flexGrow]="10" [sortable]="false" prop="id">
                                                    <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                                                      <button class="btn btn-sm btn-outline-warning" (click)="editUserRequeriment(row, $event)"><i
                                                          class="i-Edit icon-md"></i></button>&nbsp;&nbsp;
                                                        <button class="btn btn-sm btn-outline-danger" (click)="deleteUserReq(row.id)"><i
                                                            class="i-Close-Window icon-md"></i></button>
                                                    </ng-template>
                                                  </ngx-datatable-column>
											</ngx-datatable>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</ng-template>
			</li>
			<li [ngbNavItem]="4">
				<a ngbNavLink>Requerimientos de Software</a>
				<ng-template ngbNavContent>
					<div class="row">
						<div class="col-md-12">
							<div class="card o-hidden mb-4">
								<div class="row">
									<div class="col-md-2">
                                        <div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<div class="col-md-12 form-group mb-0">
														<select class="form-control">
															<option>Todos los requisitos</option>
															<option *ngFor="let item of userreqs" [value]="item.id">RU{{item.internalId | number: '2.0'}}</option>
														</select>
													</div>
												</div>
											</div>
                                        </div>

                                        <div class="card o-hidden mb-4 ml-4 mt-4">
											<div class="card-body text-center">
												<i class="i-Add-User"></i>
												<div class="content">
													<p class="text-muted mt-2 mb-0">Requerimiento de Software
													</p>
													<button _ngcontent-tkm-c169=""
														class="btn btn-primary btn-rounded" (click)="addSoftwareRequeriment(softwareRequerimentConfirmModal, $event)">Nuevo</button>
												</div>
											</div>
                                        </div>

										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Total</p>
													<p class="text-primary text-40 line-height-1 m-0">{{ softreqs.length }}</p>
												</div>
											</div>
                                        </div>

										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Finalizados </p>
													<p class="text-success text-40 line-height-1 m-0">{{ infosr.completos }}</p>
												</div>
											</div>
										</div>

										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Pendientes</p>
													<p class="text-danger text-40 line-height-1 m-0">{{ infosr.incompletos }}</p>
												</div>
											</div>
										</div>

									</div>
									<div class="col-md-10">
										<div class="card o-hidden mb-4 mt-4 mr-4">
											<ngx-datatable style="height: calc(85vh - 270px); box-shadow: none"
												class="material fullscreen" [columnMode]="'flex'" [headerHeight]="50"
												[footerHeight]="50" [rowHeight]="60" [scrollbarV]="true" [limit]="10"
												[rows]="softreqs">
												<ngx-datatable-column name="internalId" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Codigo
                                                    </ng-template>
                                                    <ng-template let-value="value" ngx-datatable-cell-template>
                                                        RS{{value | number: '2.0'}}
                                                      </ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="description" [flexGrow]="50">
													<ng-template ngx-datatable-header-template>
														Descripci√≥n
													</ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="priority" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Prioridad
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatUserReqColumns(value, 'priority') }}
                                                    </ng-template>
                                                </ngx-datatable-column>
                                                <ngx-datatable-column name="stability" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Estabilidad
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatUserReqColumns(value, 'stability') }}
                                                    </ng-template>
                                                </ngx-datatable-column>
                                                <ngx-datatable-column name="cost" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Costo
                                                    </ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="status" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Estado
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatUserReqColumns(value, 'status') }}
                                                    </ng-template>
                                                </ngx-datatable-column>
                                                <ngx-datatable-column [cellClass]="'va-middle'" name="Accion" [flexGrow]="10" [sortable]="false" prop="id">
                                                    <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                                                      <button class="btn btn-sm btn-outline-warning" (click)="editSoftRequeriment(row, $event)"><i
                                                          class="i-Edit icon-md"></i></button>&nbsp;&nbsp;
                                                        <button class="btn btn-sm btn-outline-danger" (click)="deleteSoftReq(row.id)"><i
                                                            class="i-Close-Window icon-md"></i></button>
                                                    </ng-template>
                                                  </ngx-datatable-column>
											</ngx-datatable>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</ng-template>
			</li>
			<li [ngbNavItem]="5">
				<a ngbNavLink>Casos de prueba </a>
				<ng-template ngbNavContent>
					<div class="row">
						<div class="col-md-12">
							<div class="card o-hidden mb-4">
								<div class="row">
									<div class="col-md-2">
                                        <div class="card o-hidden mb-4 ml-4 mt-4">
											<div class="card-body text-center">
												<i class="i-Add-User"></i>
												<div class="content">
													<p class="text-muted mt-2 mb-0">Caso de prueba </p>
													<button _ngcontent-tkm-c169=""
														class="btn btn-primary btn-rounded" (click)="addTestCase(testCaseConfirmModal, $event)">Agregar</button>
												</div>
											</div>
										</div>
                                        <div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Total</p>
													<p class="text-primary text-40 line-height-1 m-0">{{ testcases.length }}</p>
												</div>
											</div>
                                        </div>

										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Exitos </p>
													<p class="text-success text-40 line-height-1 m-0">{{ infotc.completos }}</p>
												</div>
											</div>
										</div>

										<div class="card o-hidden mb-4 mt-4 ml-4">
											<div class="card-body text-center">
												<div class="content">
													<p class="m-0 text-small text-muted">Fracasos</p>
													<p class="text-danger text-40 line-height-1 m-0">{{ infotc.incompletos }}</p>
												</div>
											</div>
										</div>

									</div>
									<div class="col-md-10">
										<div class="card o-hidden mb-4 mt-4 mr-4">
											<ngx-datatable style="height: calc(85vh - 270px); box-shadow: none"
												class="material fullscreen" [columnMode]="'flex'" [headerHeight]="50"
												[footerHeight]="50" [rowHeight]="60" [scrollbarV]="true" [limit]="10"
												[rows]="testcases">
												<ngx-datatable-column name="internalId" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Codigo
                                                    </ng-template>
                                                    <ng-template let-value="value" ngx-datatable-cell-template>
                                                        CP{{value | number: '2.0'}}
                                                      </ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="description" [flexGrow]="50">
													<ng-template ngx-datatable-header-template>
														Descripci√≥n
													</ng-template>
												</ngx-datatable-column>
												<ngx-datatable-column name="status" [flexGrow]="9">
													<ng-template ngx-datatable-header-template>
														Estado
                                                    </ng-template>
                                                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                                        {{ formatStatusTestCase(value) }}
                                                    </ng-template>
                                                </ngx-datatable-column>
                                                <ngx-datatable-column [cellClass]="'va-middle'" name="Accion" [flexGrow]="10" [sortable]="false" prop="id">
                                                    <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                                                      <button class="btn btn-sm btn-outline-warning" (click)="editTestCase(row, $event)"><i
                                                          class="i-Edit icon-md"></i></button>&nbsp;&nbsp;
                                                        <button class="btn btn-sm btn-outline-danger" (click)="deleteTestCase(row.id)"><i
                                                            class="i-Close-Window icon-md"></i></button>
                                                    </ng-template>
                                                  </ngx-datatable-column>
											</ngx-datatable>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</ng-template>
			</li>
			<li [ngbNavItem]="6">
				<a ngbNavLink> Documentos  </a>
				<ng-template ngbNavContent>
					<div class="row">
						<documents-component [doctype]="proyecto.doctype">

						</documents-component>
					</div>
				</ng-template>
			</li>
		</ul>
		<div [ngbNavOutlet]="nav" class="mt-2"></div>
	</div>
</div>







